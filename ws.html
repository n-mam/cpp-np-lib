<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
</head>
<body>
<script>

let sock = new WebSocket("ws://localhost:8080");

sock.onopen = function(e) {
  console.log("Connection established");
  for (let i = 1; i <= 20; i++)
  {
    sock.send("Message " +  i.toString() + " from client");
  }
};

sock.onmessage = function(e) {
  console.log(`server : ${e.data}`);
};

sock.onclose = function(e) {
  if (e.wasClean) 
  {
    console.log(`Connection closed, code=${e.code} reason=${e.reason}`);
  }
  else 
  {
    console.log('Connection died');
  }
};

sock.onerror = function(err) {
  console.log(`error : ${err.message}`);
};

</script>
</body>
</html>